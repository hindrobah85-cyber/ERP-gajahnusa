<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAJAH NUSA - ERP AI Cerdas dan Canggih</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/recharts@2.5.0/umd/Recharts.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f0f2f5;
            min-height: 100vh;
        }

        /* Logo Component */
        .gajah-nusa-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: white;
            letter-spacing: 2px;
        }

        /* Login Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #2c3e50 0%, #3f5973 100%);
        }

        .login-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 450px;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo {
            margin-bottom: 20px;
        }

        .login-logo svg {
            width: 100px;
            height: 100px;
        }

        .login-title {
            font-size: 28px;
            color: #2c3e50;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .login-subtitle {
            color: #666;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3f5973;
            box-shadow: 0 0 0 3px rgba(63, 89, 115, 0.1);
        }

        .login-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .login-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .login-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Dashboard Layout */
        .dashboard-container {
            display: flex;
            height: 100vh;
            background: #f0f2f5;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #1a252f 100%);
            color: white;
            overflow-y: auto;
            transition: all 0.3s;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.2);
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            color: rgba(255,255,255,0.8);
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .menu-item.active {
            background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            font-weight: 600;
        }

        .menu-icon {
            width: 20px;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            overflow-y: auto;
        }

        .top-header {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-title {
            font-size: 24px;
            color: #2c3e50;
            font-weight: 600;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .notification-icon {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            color: #666;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .user-profile:hover {
            background: #f0f2f5;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 30px;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #27ae60 0%, #2ecc71 100%);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
        }

        .stat-change {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .stat-change.positive {
            background: #d4edda;
            color: #155724;
        }

        .stat-change.negative {
            background: #f8d7da;
            color: #721c24;
        }

        /* Fraud Alert Panel */
        .fraud-alert-panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .panel-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }

        .alert-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .alert-item {
            padding: 15px;
            border-left: 4px solid #e74c3c;
            background: #fff5f5;
            margin-bottom: 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .alert-item:hover {
            transform: translateX(5px);
        }

        .alert-severity {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 10px;
        }

        .severity-high {
            background: #e74c3c;
            color: white;
        }

        .severity-medium {
            background: #f39c12;
            color: white;
        }

        .severity-low {
            background: #95a5a6;
            color: white;
        }

        /* Tables */
        .data-table {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 12px;
            background: #f8f9fa;
            color: #2c3e50;
            font-weight: 600;
            border-bottom: 2px solid #e9ecef;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #f1f3f5;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-process {
            background: #cce5ff;
            color: #004085;
        }

        /* Action Buttons */
        .action-button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .action-button.primary {
            background: #27ae60;
            color: white;
        }

        .action-button.primary:hover {
            background: #229954;
        }

        .action-button.danger {
            background: #e74c3c;
            color: white;
        }

        .action-button.danger:hover {
            background: #c0392b;
        }
        
        .action-button.warning {
            background: #f39c12;
            color: white;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #27ae60;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error Message */
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #e74c3c;
        }

        /* Success Message */
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: modalFade 0.3s ease;
        }

        @keyframes modalFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.show {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 500px;
            max-width: 90%;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { 
                transform: translateY(-50px) scale(0.9);
                opacity: 0;
            }
            to { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        .close-button {
            font-size: 28px;
            color: #999;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close-button:hover {
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Check if React and ReactDOM are loaded
        if (typeof React === 'undefined') {
            console.error('React is not loaded');
            document.getElementById('root').innerHTML = '<h1>Error: React library not loaded</h1>';
        }
        
        if (typeof ReactDOM === 'undefined') {
            console.error('ReactDOM is not loaded');
            document.getElementById('root').innerHTML = '<h1>Error: ReactDOM library not loaded</h1>';
        }
        
        if (typeof Recharts === 'undefined') {
            console.warn('Recharts is not loaded - charts will not work');
        }
        
        console.log('Starting GAJAH NUSA ERP Application...');
        
        const { useState, useEffect, useRef } = React;
        const { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } = Recharts || {};

        // API Configuration - Connects to Backend
        const API_BASE_URL = 'http://localhost:8000/api';
        
        // Gajah Nusa Logo Component
        const GajahNusaLogo = ({ size = 50, showText = true }) => {
            return (
                <div className="gajah-nusa-logo">
                    <svg width={size} height={size} viewBox="0 0 100 100">
                        {/* Outer circle - green background */}
                        <circle cx="50" cy="50" r="48" fill="#27ae60" stroke="#f1c40f" strokeWidth="4"/>
                        
                        {/* Triangle - blue */}
                        <path d="M 50 20 L 75 65 L 25 65 Z" fill="#2c3e50" stroke="#f1c40f" strokeWidth="2"/>
                        
                        {/* Star - yellow */}
                        <path d="M 50 35 L 53 43 L 61 43 L 55 48 L 58 56 L 50 51 L 42 56 L 45 48 L 39 43 L 47 43 Z" 
                              fill="#f1c40f"/>
                    </svg>
                    {showText && <span className="logo-text">GAJAH NUSA</span>}
                </div>
            );
        };

        // Login Component
        const LoginScreen = ({ onLogin }) => {
            const [employeeId, setEmployeeId] = useState('');
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);

                try {
                    // In production, make actual API call
                    // const response = await axios.post(`${API_BASE_URL}/auth/login`, {
                    //     employee_id: employeeId,
                    //     password: password
                    // });
                    
                    // Simulated login for demo
                    if (employeeId && password) {
                        setTimeout(() => {
                            onLogin({
                                token: 'demo-token',
                                user: {
                                    id: '1',
                                    name: 'Admin User',
                                    role: 'admin',
                                    email: 'admin@gajahnusa.com'
                                }
                            });
                        }, 1000);
                    } else {
                        setError('Please enter Employee ID and Password');
                        setLoading(false);
                    }
                } catch (err) {
                    setError('Login failed. Please check your credentials.');
                    setLoading(false);
                }
            };

            return (
                <div className="login-container">
                    <div className="login-card">
                        <div className="login-header">
                            <div className="login-logo">
                                <GajahNusaLogo size={100} showText={false} />
                            </div>
                            <h1 className="login-title">GAJAH NUSA</h1>
                            <p className="login-subtitle">ERP AI Cerdas dan Canggih</p>
                        </div>

                        {error && <div className="error-message">{error}</div>}

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">Employee ID</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    value={employeeId}
                                    onChange={(e) => setEmployeeId(e.target.value)}
                                    placeholder="Enter your employee ID"
                                    required
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Password</label>
                                <input
                                    type="password"
                                    className="form-input"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="Enter your password"
                                    required
                                />
                            </div>

                            <button type="submit" className="login-button" disabled={loading}>
                                {loading ? (
                                    <span>
                                        <span className="loading-spinner"></span> Logging in...
                                    </span>
                                ) : (
                                    'Login'
                                )}
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        // Main Dashboard Component
        const Dashboard = ({ user, onLogout }) => {
            const [activeMenu, setActiveMenu] = useState('dashboard');
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState(null);
            const [stats, setStats] = useState({
                totalSales: 125000000,
                totalOrders: 342,
                activeCustomers: 128,
                pendingPayments: 45,
                fraudAlerts: 3
            });
            const [fraudAlerts, setFraudAlerts] = useState([]);
            const [recentPayments, setRecentPayments] = useState([]);

            useEffect(() => {
                loadDashboardData();
            }, []);

            const loadDashboardData = async () => {
                // Load fraud alerts
                setFraudAlerts([
                    { id: 1, type: 'Late Deposit', salesman: 'John Doe', amount: 5000000, severity: 'high', time: '2 hours ago' },
                    { id: 2, type: 'QR Duplication', salesman: 'Jane Smith', amount: 2000000, severity: 'medium', time: '5 hours ago' },
                    { id: 3, type: 'Location Mismatch', salesman: 'Bob Johnson', amount: 1000000, severity: 'low', time: '1 day ago' }
                ]);

                // Load recent payments
                setRecentPayments([
                    { id: 1, nota: 'NT20250108001', customer: 'Toko ABC', amount: 3500000, status: 'verified', salesman: 'John Doe' },
                    { id: 2, nota: 'NT20250108002', customer: 'Toko XYZ', amount: 2750000, status: 'pending', salesman: 'Jane Smith' },
                    { id: 3, nota: 'NT20250108003', customer: 'Toko 123', amount: 4200000, status: 'process', salesman: 'Bob Johnson' }
                ]);
            };
            
            const handleViewPayment = (payment) => {
                setModalContent(
                    <div>
                        <h3>Payment Details</h3>
                        <p><strong>Nota:</strong> {payment.nota}</p>
                        <p><strong>Customer:</strong> {payment.customer}</p>
                        <p><strong>Amount:</strong> Rp {payment.amount.toLocaleString()}</p>
                        <p><strong>Status:</strong> {payment.status}</p>
                    </div>
                );
                setShowModal(true);
            };

            const handleVerifyPayment = (payment) => {
                setModalContent(
                    <div>
                        <h3>Verify Payment</h3>
                        <p>Are you sure you want to verify payment for <strong>{payment.nota}</strong>?</p>
                        <button className="action-button primary" onClick={() => {
                            alert(`Payment ${payment.nota} verified!`);
                            setShowModal(false);
                        }}>
                            Yes, Verify
                        </button>
                    </div>
                );
                setShowModal(true);
            };

            const menuItems = [
                { id: 'dashboard', label: 'Dashboard', icon: 'fas fa-home' },
                { id: 'payments', label: 'Payments', icon: 'fas fa-money-bill-wave' },
                { id: 'orders', label: 'Orders', icon: 'fas fa-shopping-cart' },
                { id: 'customers', label: 'Customers', icon: 'fas fa-users' },
                { id: 'sales-team', label: 'Sales Team', icon: 'fas fa-user-tie' },
                { id: 'fraud-monitor', label: 'Fraud Monitor', icon: 'fas fa-shield-alt' },
                { id: 'reports', label: 'Reports', icon: 'fas fa-chart-bar' },
                { id: 'settings', label: 'Settings', icon: 'fas fa-cog' }
            ];

            const salesData = [
                { name: 'Mon', sales: 12000000 },
                { name: 'Tue', sales: 15000000 },
                { name: 'Wed', sales: 18000000 },
                { name: 'Thu', sales: 14000000 },
                { name: 'Fri', sales: 22000000 },
                { name: 'Sat', sales: 19000000 },
                { name: 'Sun', sales: 25000000 }
            ];

            const renderContent = () => {
                switch(activeMenu) {
                    case 'dashboard':
                        return (
                            <>
                                {/* Stats Grid */}
                                <div className="stats-grid">
                                    <div className="stat-card">
                                        <div className="stat-icon" style={{background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'}}>
                                            <i className="fas fa-chart-line" style={{color: 'white'}}></i>
                                        </div>
                                        <div className="stat-value">
                                            {(stats.totalSales / 1000000).toFixed(1)}M
                                        </div>
                                        <div className="stat-label">Total Sales</div>
                                        <div className="stat-change positive">
                                            <i className="fas fa-arrow-up"></i> 12.5%
                                        </div>
                                    </div>

                                    <div className="stat-card">
                                        <div className="stat-icon" style={{background: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'}}>
                                            <i className="fas fa-shopping-bag" style={{color: 'white'}}></i>
                                        </div>
                                        <div className="stat-value">{stats.totalOrders}</div>
                                        <div className="stat-label">Total Orders</div>
                                        <div className="stat-change positive">
                                            <i className="fas fa-arrow-up"></i> 8.2%
                                        </div>
                                    </div>

                                    <div className="stat-card">
                                        <div className="stat-icon" style={{background: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)'}}>
                                            <i className="fas fa-users" style={{color: 'white'}}></i>
                                        </div>
                                        <div className="stat-value">{stats.activeCustomers}</div>
                                        <div className="stat-label">Active Customers</div>
                                        <div className="stat-change positive">
                                            <i className="fas fa-arrow-up"></i> 5.1%
                                        </div>
                                    </div>

                                    <div className="stat-card">
                                        <div className="stat-icon" style={{background: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)'}}>
                                            <i className="fas fa-exclamation-triangle" style={{color: 'white'}}></i>
                                        </div>
                                        <div className="stat-value">{stats.fraudAlerts}</div>
                                        <div className="stat-label">Fraud Alerts</div>
                                        <div className="stat-change negative">
                                            <i className="fas fa-arrow-up"></i> New alerts
                                        </div>
                                    </div>
                                </div>

                                {/* Fraud Alert Panel */}
                                <div className="fraud-alert-panel">
                                    <div className="panel-header">
                                        <h3 className="panel-title">
                                            <i className="fas fa-shield-alt" style={{marginRight: '10px', color: '#e74c3c'}}></i>
                                            Fraud Detection Alerts
                                        </h3>
                                        <button className="action-button primary">View All</button>
                                    </div>
                                    <div className="alert-list">
                                        {fraudAlerts.map(alert => (
                                            <div key={alert.id} className="alert-item">
                                                <span className={`alert-severity severity-${alert.severity}`}>
                                                    {alert.severity.toUpperCase()}
                                                </span>
                                                <strong>{alert.type}</strong> - {alert.salesman}
                                                <br />
                                                <small>Amount: Rp {alert.amount.toLocaleString()} | {alert.time}</small>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Sales Chart */}
                                <div className="data-table" style={{marginBottom: '30px'}}>
                                    <h3 className="panel-title" style={{marginBottom: '20px'}}>Weekly Sales Trend</h3>
                                    <ResponsiveContainer width="100%" height={300}>
                                        <LineChart data={salesData}>
                                            <CartesianGrid strokeDasharray="3 3" />
                                            <XAxis dataKey="name" />
                                            <YAxis />
                                            <Tooltip />
                                            <Legend />
                                            <Line type="monotone" dataKey="sales" stroke="#27ae60" strokeWidth={3} />
                                        </LineChart>
                                    </ResponsiveContainer>
                                </div>

                                {/* Recent Payments Table */}
                                <div className="data-table">
                                    <div className="panel-header">
                                        <h3 className="panel-title">Recent Payments</h3>
                                    </div>
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Nota Number</th>
                                                <th>Customer</th>
                                                <th>Salesman</th>
                                                <th>Amount</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {recentPayments.map(payment => (
                                                <tr key={payment.id}>
                                                    <td>{payment.nota}</td>
                                                    <td>{payment.customer}</td>
                                                    <td>{payment.salesman}</td>
                                                    <td>Rp {payment.amount.toLocaleString()}</td>
                                                    <td>
                                                        <span className={`status-badge ${
                                                            payment.status === 'verified' ? 'status-active' : 
                                                            payment.status === 'pending' ? 'status-pending' : 
                                                            'status-process'
                                                        }`}>
                                                            {payment.status}
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <button className="action-button primary" style={{marginRight: '5px'}} onClick={() => handleViewPayment(payment)}>
                                                            View
                                                        </button>
                                                        {payment.status === 'pending' && (
                                                            <button className="action-button warning" onClick={() => handleVerifyPayment(payment)}>
                                                                Verify
                                                            </button>
                                                        )}
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </>
                        );
                    case 'fraud-monitor':
                        return <FraudMonitor />;
                    case 'payments':
                        return <PaymentManagement />;
                    default:
                        return <div className="data-table">
                            <h2>{menuItems.find(m => m.id === activeMenu)?.label} - Under Development</h2>
                        </div>;
                }
            };

            return (
                <>
                    <div className="dashboard-container">
                        {/* Sidebar */}
                        <div className="sidebar">
                            <div className="sidebar-header">
                                <GajahNusaLogo size={40} />
                            </div>
                            <div className="sidebar-menu">
                                {menuItems.map(item => (
                                    <div
                                        key={item.id}
                                        className={`menu-item ${activeMenu === item.id ? 'active' : ''}`}
                                        onClick={() => setActiveMenu(item.id)}
                                    >
                                        <i className={`${item.icon} menu-icon`}></i>
                                        <span>{item.label}</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Main Content */}
                        <div className="main-content">
                            {/* Top Header */}
                            <div className="top-header">
                                <div className="header-left">
                                    <h2 className="header-title">
                                        {menuItems.find(m => m.id === activeMenu)?.label || 'Dashboard'}
                                    </h2>
                                </div>
                                <div className="header-right">
                                    <div className="notification-icon">
                                        <i className="fas fa-bell"></i>
                                        <span className="notification-badge">3</span>
                                    </div>
                                    <div className="user-profile">
                                        <div className="user-avatar">
                                            {user.name.charAt(0)}
                                        </div>
                                        <div>
                                            <div style={{fontWeight: '600', fontSize: '14px'}}>{user.name}</div>
                                            <div style={{fontSize: '12px', color: '#666'}}>{user.role}</div>
                                        </div>
                                        <i className="fas fa-chevron-down" style={{marginLeft: '10px', color: '#666'}}></i>
                                    </div>
                                    <button onClick={onLogout} className="action-button danger">
                                        <i className="fas fa-sign-out-alt"></i> Logout
                                    </button>
                                </div>
                            </div>

                            {/* Dashboard Content */}
                            <div className="dashboard-content">
                                {renderContent()}
                            </div>
                        </div>
                    </div>
                    
                    {/* Generic Modal */}
                    <div className={`modal ${showModal ? 'show' : ''}`}>
                        <div className="modal-content">
                            <div className="modal-header">
                                <h3 className="modal-title">System Message</h3>
                                <span className="close-button" onClick={() => setShowModal(false)}>&times;</span>
                            </div>
                            {modalContent}
                        </div>
                    </div>
                </>
            );
        };

        // Fraud Monitor Component
        const FraudMonitor = () => {
            const [fraudData, setFraudData] = useState([]);

            useEffect(() => {
                // Load fraud monitoring data
                setFraudData([
                    { id: 1, user: 'John Doe', score: 0.85, type: 'Late Deposit', count: 5, status: 'high' },
                    { id: 2, user: 'Jane Smith', score: 0.65, type: 'QR Duplication', count: 2, status: 'medium' },
                    { id: 3, user: 'Bob Johnson', score: 0.35, type: 'Location Mismatch', count: 1, status: 'low' }
                ]);
            }, []);

            return (
                <div>
                    <div className="fraud-alert-panel">
                        <div className="panel-header">
                            <h3 className="panel-title">Real-time Fraud Detection</h3>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Salesman</th>
                                    <th>Fraud Score</th>
                                    <th>Violation Type</th>
                                    <th>Count</th>
                                    <th>Risk Level</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {fraudData.map(item => (
                                    <tr key={item.id}>
                                        <td>{item.user}</td>
                                        <td>
                                            <div style={{width: '100px', background: '#e0e0e0', borderRadius: '10px', overflow: 'hidden'}}>
                                                <div style={{
                                                    width: `${item.score * 100}%`,
                                                    height: '20px',
                                                    background: item.score > 0.7 ? '#e74c3c' : item.score > 0.4 ? '#f39c12' : '#27ae60'
                                                }}></div>
                                            </div>
                                            {(item.score * 100).toFixed(0)}%
                                        </td>
                                        <td>{item.type}</td>
                                        <td>{item.count}</td>
                                        <td>
                                            <span className={`alert-severity severity-${item.status}`}>
                                                {item.status.toUpperCase()}
                                            </span>
                                        </td>
                                        <td>
                                            <button className="action-button primary" style={{marginRight: '5px'}}>
                                                Review
                                            </button>
                                            <button className="action-button danger">
                                                Suspend
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        // Payment Management Component
        const PaymentManagement = () => {
            const [payments, setPayments] = useState([]);

            useEffect(() => {
                setPayments([
                    { id: 1, nota: 'NT20250108001', customer: 'Toko ABC', amount: 3500000, method: 'cash', status: 'pending_deposit', depositTime: null },
                    { id: 2, nota: 'NT20250108002', customer: 'Toko XYZ', amount: 2750000, method: 'transfer', status: 'verified', depositTime: '2025-01-08 14:30' },
                    { id: 3, nota: 'NT20250108003', customer: 'Toko 123', amount: 4200000, method: 'cash', status: 'pending_otp', depositTime: null }
                ]);
            }, []);

            const handleVerifyDeposit = (paymentId) => {
                // API call to verify deposit
                alert(`Verifying deposit for payment ${paymentId}`);
            };

            return (
                <div className="data-table">
                    <div className="panel-header">
                        <h3 className="panel-title">Payment Verification System</h3>
                        <button className="action-button primary">
                            <i className="fas fa-plus"></i> New Payment
                        </button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Nota Number</th>
                                <th>Customer</th>
                                <th>Amount</th>
                                <th>Method</th>
                                <th>Status</th>
                                <th>Deposit Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {payments.map(payment => (
                                <tr key={payment.id}>
                                    <td>{payment.nota}</td>
                                    <td>{payment.customer}</td>
                                    <td>Rp {payment.amount.toLocaleString()}</td>
                                    <td>{payment.method.toUpperCase()}</td>
                                    <td>
                                        <span className={`status-badge ${
                                            payment.status === 'verified' ? 'status-active' : 
                                            payment.status === 'pending_deposit' ? 'status-pending' : 
                                            'status-inactive'
                                        }`}>
                                            {payment.status.replace('_', ' ').toUpperCase()}
                                        </span>
                                    </td>
                                    <td>{payment.depositTime || '-'}</td>
                                    <td>
                                        {payment.status === 'pending_deposit' && (
                                            <button 
                                                className="action-button primary"
                                                onClick={() => handleVerifyDeposit(payment.id)}
                                            >
                                                Verify Deposit
                                            </button>
                                        )}
                                        {payment.status === 'pending_otp' && (
                                            <button className="action-button danger">
                                                Resend OTP
                                            </button>
                                        )}
                                        {payment.status === 'verified' && (
                                            <button className="action-button primary">
                                                View Details
                                            </button>
                                        )}
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [user, setUser] = useState(null);

            const handleLogin = (loginData) => {
                setIsAuthenticated(true);
                setUser(loginData.user);
                // Store token in localStorage
                localStorage.setItem('token', loginData.token);
                localStorage.setItem('user', JSON.stringify(loginData.user));
            };

            const handleLogout = () => {
                setIsAuthenticated(false);
                setUser(null);
                localStorage.removeItem('token');
                localStorage.removeItem('user');
            };

            useEffect(() => {
                // Check for existing session
                const storedToken = localStorage.getItem('token');
                const storedUser = localStorage.getItem('user');
                
                if (storedToken && storedUser) {
                    setIsAuthenticated(true);
                    setUser(JSON.parse(storedUser));
                }
            }, []);

            return isAuthenticated ? (
                <Dashboard user={user} onLogout={handleLogout} />
            ) : (
                <LoginScreen onLogin={handleLogin} />
            );
        };

        // Render the app
        try {
            console.log('Rendering React App...');
            ReactDOM.render(<App />, document.getElementById('root'));
            console.log('React App rendered successfully!');
        } catch (error) {
            console.error('Error rendering React App:', error);
            document.getElementById('root').innerHTML = `
                <div style="padding: 20px; background: #f8f9fa; min-height: 100vh; font-family: Arial, sans-serif;">
                    <h1 style="color: #e74c3c;">GAJAH NUSA ERP - Error</h1>
                    <p style="color: #666;">Terjadi kesalahan saat memuat aplikasi:</p>
                    <pre style="background: #fff; padding: 10px; border: 1px solid #ddd; border-radius: 4px; overflow: auto;">${error.message}</pre>
                    <p style="color: #666;">Silakan refresh halaman atau hubungi administrator.</p>
                </div>
            `;
        }
    </script>
</body>
</html>
