<!DOCTYPE html>
<html>
<head>
    <title>Test Prioritas Tanggal - Batch Payment</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .container { max-width: 1000px; margin: 0 auto; }
        h1, h2 { color: #333; }
        .test-scenario { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #007bff; }
        .invoice-list { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 15px 0; }
        .invoice-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .oldest { background: #ffebee; border-left: 4px solid #f44336; }
        .old { background: #fff3e0; border-left: 4px solid #ff9800; }
        .recent { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .newest { background: #e3f2fd; border-left: 4px solid #2196f3; }
        .payment-test { background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .result { background: #d4edda; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #28a745; }
        .priority { font-weight: bold; color: #dc3545; }
        .steps { background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .step { margin: 8px 0; padding: 5px 0; }
        code { background: #f1f3f4; padding: 2px 6px; border-radius: 4px; }
        .highlight { background: #ffeb3b; padding: 2px 6px; border-radius: 4px; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f8f9fa; font-weight: bold; }
        .date-col { font-weight: bold; color: #666; }
        .amount-col { color: #28a745; font-weight: bold; }
        .status-lunas { color: #28a745; font-weight: bold; }
        .status-titip { color: #ffc107; font-weight: bold; }
        .status-tidak { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 Test Prioritas Pembayaran Berdasarkan Tanggal</h1>
        
        <div class="test-scenario">
            <h2>📋 Skenario Test: Toko Samudra</h2>
            <p>Customer memiliki 6 faktur dengan tanggal yang berbeda. Sistem akan mengutamakan pembayaran pada faktur yang paling lama terlebih dahulu.</p>
        </div>
        
        <h3>📅 Daftar Faktur (Diurutkan berdasarkan tanggal):</h3>
        
        <table>
            <thead>
                <tr>
                    <th>Nomor Faktur</th>
                    <th>Tanggal</th>
                    <th>Umur (hari)</th>
                    <th>Jumlah</th>
                    <th>Status</th>
                    <th>Prioritas</th>
                </tr>
            </thead>
            <tbody>
                <tr class="oldest">
                    <td>📄 INV-2025-018</td>
                    <td class="date-col">2025-08-20</td>
                    <td>21 hari</td>
                    <td class="amount-col">Rp 1.500.000</td>
                    <td>⚠️ Terlambat</td>
                    <td class="priority">Prioritas #1 (TERLAMA)</td>
                </tr>
                <tr class="old">
                    <td>📄 INV-2025-016</td>
                    <td class="date-col">2025-09-03</td>
                    <td>7 hari</td>
                    <td class="amount-col">Rp 2.000.000</td>
                    <td>✅ Lancar</td>
                    <td class="priority">Prioritas #2</td>
                </tr>
                <tr class="old">
                    <td>📄 INV-2025-017</td>
                    <td class="date-col">2025-09-04</td>
                    <td>6 hari</td>
                    <td class="amount-col">Rp 2.000.000</td>
                    <td>✅ Lancar</td>
                    <td class="priority">Prioritas #3</td>
                </tr>
                <tr class="recent">
                    <td>📄 INV-2025-019</td>
                    <td class="date-col">2025-09-06</td>
                    <td>4 hari</td>
                    <td class="amount-col">Rp 2.500.000</td>
                    <td>✅ Lancar</td>
                    <td>Prioritas #4</td>
                </tr>
                <tr class="recent">
                    <td>📄 INV-2025-020</td>
                    <td class="date-col">2025-09-08</td>
                    <td>2 hari</td>
                    <td class="amount-col">Rp 1.000.000</td>
                    <td>✅ Lancar</td>
                    <td>Prioritas #5</td>
                </tr>
                <tr class="newest">
                    <td>📄 INV-2025-021</td>
                    <td class="date-col">2025-09-09</td>
                    <td>1 hari</td>
                    <td class="amount-col">Rp 3.000.000</td>
                    <td>✅ Lancar</td>
                    <td>Prioritas #6 (TERBARU)</td>
                </tr>
            </tbody>
        </table>
        
        <div class="payment-test">
            <h3>💰 Test Case: Pembayaran Rp 5.000.000</h3>
            <p><strong>Total semua faktur:</strong> Rp 12.000.000</p>
            <p><strong>Jumlah yang dibayar:</strong> <span class="highlight">Rp 5.000.000</span></p>
        </div>
        
        <h3>🧮 Proses Alokasi Berdasarkan Tanggal Terlama:</h3>
        
        <div class="steps">
            <div class="step"><strong>Step 1:</strong> Urutkan faktur berdasarkan tanggal (2025-08-20 → 2025-09-09)</div>
            <div class="step"><strong>Step 2:</strong> Mulai alokasi dari faktur terlama:</div>
            <div class="step">&nbsp;&nbsp;&nbsp;💰 Sisa pembayaran: Rp 5.000.000</div>
            <div class="step">&nbsp;&nbsp;&nbsp;📄 INV-2025-018 (Rp 1.500.000) → ✅ LUNAS (sisa: Rp 3.500.000)</div>
            <div class="step">&nbsp;&nbsp;&nbsp;📄 INV-2025-016 (Rp 2.000.000) → ✅ LUNAS (sisa: Rp 1.500.000)</div>
            <div class="step">&nbsp;&nbsp;&nbsp;📄 INV-2025-017 (Rp 2.000.000) → ⚠️ TITIP (bayar: Rp 1.500.000, sisa: Rp 500.000)</div>
            <div class="step">&nbsp;&nbsp;&nbsp;📄 INV-2025-019, INV-2025-020, INV-2025-021 → ❌ BELUM BAYAR</div>
        </div>
        
        <div class="result">
            <h3>✅ Hasil Akhir:</h3>
            <table>
                <thead>
                    <tr>
                        <th>Faktur</th>
                        <th>Tanggal</th>
                        <th>Jumlah Faktur</th>
                        <th>Dibayar</th>
                        <th>Status</th>
                        <th>Sisa Hutang</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>INV-2025-018</td>
                        <td>2025-08-20</td>
                        <td>Rp 1.500.000</td>
                        <td>Rp 1.500.000</td>
                        <td class="status-lunas">✅ LUNAS</td>
                        <td>Rp 0</td>
                    </tr>
                    <tr>
                        <td>INV-2025-016</td>
                        <td>2025-09-03</td>
                        <td>Rp 2.000.000</td>
                        <td>Rp 2.000.000</td>
                        <td class="status-lunas">✅ LUNAS</td>
                        <td>Rp 0</td>
                    </tr>
                    <tr>
                        <td>INV-2025-017</td>
                        <td>2025-09-04</td>
                        <td>Rp 2.000.000</td>
                        <td>Rp 1.500.000</td>
                        <td class="status-titip">⚠️ TITIP</td>
                        <td>Rp 500.000</td>
                    </tr>
                    <tr>
                        <td>INV-2025-019</td>
                        <td>2025-09-06</td>
                        <td>Rp 2.500.000</td>
                        <td>Rp 0</td>
                        <td class="status-tidak">❌ BELUM BAYAR</td>
                        <td>Rp 2.500.000</td>
                    </tr>
                    <tr>
                        <td>INV-2025-020</td>
                        <td>2025-09-08</td>
                        <td>Rp 1.000.000</td>
                        <td>Rp 0</td>
                        <td class="status-tidak">❌ BELUM BAYAR</td>
                        <td>Rp 1.000.000</td>
                    </tr>
                    <tr>
                        <td>INV-2025-021</td>
                        <td>2025-09-09</td>
                        <td>Rp 3.000.000</td>
                        <td>Rp 0</td>
                        <td class="status-tidak">❌ BELUM BAYAR</td>
                        <td>Rp 3.000.000</td>
                    </tr>
                </tbody>
            </table>
            
            <h4>📊 Summary:</h4>
            <ul>
                <li><strong>2 faktur LUNAS</strong> (yang paling lama)</li>
                <li><strong>1 faktur TITIP</strong> (sebagian dibayar)</li>
                <li><strong>3 faktur BELUM BAYAR</strong> (yang paling baru)</li>
                <li><strong>Total dibayar:</strong> Rp 5.000.000</li>
                <li><strong>Sisa hutang:</strong> Rp 7.500.000</li>
            </ul>
        </div>
        
        <div class="test-scenario">
            <h3>🎯 Keuntungan Prioritas Berdasarkan Tanggal:</h3>
            <ul>
                <li>✅ <strong>Aging Control:</strong> Faktur lama dilunasi terlebih dahulu</li>
                <li>✅ <strong>Cash Flow Management:</strong> Mengurangi piutang macet</li>
                <li>✅ <strong>Customer Relationship:</strong> Menghindari customer dengan hutang terlalu lama</li>
                <li>✅ <strong>Business Logic:</strong> Sesuai dengan praktik bisnis yang benar</li>
            </ul>
        </div>
        
        <div class="steps">
            <h3>🚀 Cara Test di Aplikasi:</h3>
            <div class="step">1. Buka <code>sales-mobile-final.html</code></div>
            <div class="step">2. Login dengan EMP001 / password123</div>
            <div class="step">3. Pilih <strong>💳 Tagihan</strong></div>
            <div class="step">4. Switch ke mode <strong>💳💳 Bayar Multiple</strong></div>
            <div class="step">5. Pilih semua faktur Toko Samudra</div>
            <div class="step">6. Masukkan pembayaran <strong>Rp 5.000.000</strong></div>
            <div class="step">7. Lihat bagaimana sistem mengalokasikan berdasarkan tanggal terlama!</div>
        </div>
    </div>
</body>
</html>
