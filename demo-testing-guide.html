<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panduan Testing Overpayment - Sales Mobile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .header h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .header p {
            color: #666;
            font-size: 1.2em;
        }
        
        .action-buttons {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn-large {
            flex: 1;
            min-width: 200px;
            padding: 30px;
            background: white;
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn-large:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .btn-large .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .btn-large .title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .btn-large .desc {
            color: #666;
            font-size: 0.9em;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .btn-primary .title,
        .btn-primary .desc {
            color: white;
        }
        
        .steps-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .step {
            background: #f8f9fa;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            position: relative;
        }
        
        .step-number {
            position: absolute;
            top: -15px;
            left: 20px;
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .step h3 {
            color: #667eea;
            margin-top: 10px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .step-content {
            color: #333;
            line-height: 1.8;
            font-size: 1.1em;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            color: #856404;
        }
        
        .success {
            background: #d4edda;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            color: #155724;
        }
        
        .warning {
            background: #f8d7da;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
            color: #721c24;
        }
        
        .scenario-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #667eea;
        }
        
        .scenario-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .expected-result {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.6;
        }
        
        .video-placeholder {
            background: #000;
            color: white;
            padding: 100px;
            text-align: center;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 1.5em;
        }
        
        .tips-box {
            background: #d1ecf1;
            border-left: 5px solid #0c5460;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .tips-box h4 {
            color: #0c5460;
            margin-bottom: 10px;
        }
        
        .tips-box ul {
            margin-left: 20px;
            color: #0c5460;
        }
        
        .tips-box li {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧪 Panduan Testing Overpayment Feature</h1>
            <p>Tutorial Lengkap Cara Test Fitur Pembayaran</p>
        </div>
        
        <div class="action-buttons">
            <button class="btn-large btn-primary" onclick="openSalesMobile()">
                <div class="icon">🚀</div>
                <div class="title">Buka Sales Mobile</div>
                <div class="desc">Klik untuk membuka aplikasi</div>
            </button>
            
            <button class="btn-large" onclick="scrollToTest('test1')">
                <div class="icon">🔄</div>
                <div class="title">Test Overpayment</div>
                <div class="desc">Bayar lebih dari faktur</div>
            </button>
            
            <button class="btn-large" onclick="scrollToTest('test2')">
                <div class="icon">✅</div>
                <div class="title">Test Pembayaran Pas</div>
                <div class="desc">Bayar sesuai jumlah</div>
            </button>
            
            <button class="btn-large" onclick="scrollToTest('test3')">
                <div class="icon">📦</div>
                <div class="title">Test Cicilan</div>
                <div class="desc">Bayar kurang dari faktur</div>
            </button>
        </div>
        
        <!-- Test 1: Overpayment dengan Next Invoice -->
        <div class="steps-container" id="test1">
            <h2 style="color: #667eea; margin-bottom: 30px; text-align: center;">
                🔄 TEST 1: OVERPAYMENT DENGAN ALOKASI KE INVOICE BERIKUTNYA
            </h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <h3>Buka Sales Mobile Dashboard</h3>
                <div class="step-content">
                    • Klik tombol <span class="highlight">"🚀 Buka Sales Mobile"</span> di atas<br>
                    • Atau buka file: <code>sales-mobile-final.html</code><br>
                    • Tunggu sampai dashboard muncul
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>Pilih Toko dengan Banyak Faktur</h3>
                <div class="step-content">
                    • Scroll ke bawah, lihat daftar toko<br>
                    • Pilih toko yang memiliki <span class="warning">2 faktur atau lebih</span><br>
                    • Contoh: <span class="highlight">"Toko Sumber Rejeki"</span><br>
                    • Klik nama toko untuk melihat detail faktur
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>Klik Tombol "Bayar" pada Faktur Pertama</h3>
                <div class="step-content">
                    • Anda akan melihat list faktur dari toko tersebut<br>
                    • Misal ada: <span class="highlight">FGN-001-2024 (Rp 1.500.000)</span> dan FGN-002-2024<br>
                    • Klik tombol <span class="success">"💳 Bayar"</span> pada faktur pertama<br>
                    • Form pembayaran akan muncul
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <h3>Input Jumlah Bayar LEBIH BESAR</h3>
                <div class="step-content">
                    <strong>INI KUNCI TESTING OVERPAYMENT:</strong><br><br>
                    • Lihat total faktur: <span class="highlight">Rp 1.500.000</span><br>
                    • Input jumlah bayar: <span class="warning">Rp 2.000.000</span> (lebih besar!)<br>
                    • Selisih: <span class="success">Rp 500.000</span> → ini yang akan dialokasikan ke faktur berikutnya
                </div>
                
                <div class="scenario-box">
                    <div class="scenario-title">💡 Contoh Input:</div>
                    Total Faktur: <strong>Rp 1.500.000</strong><br>
                    Jumlah Bayar: <strong>Rp 2.000.000</strong><br>
                    Overpayment: <strong>Rp 500.000</strong>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">5</div>
                <h3>Pilih Metode Pembayaran</h3>
                <div class="step-content">
                    • Pilih salah satu: <span class="highlight">Cash / Transfer / Cek / Giro</span><br>
                    • Untuk testing cepat, pilih <span class="success">"Cash"</span><br>
                    • Upload bukti pembayaran (opsional untuk testing)
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">6</div>
                <h3>Klik "Proses Pembayaran"</h3>
                <div class="step-content">
                    • Klik tombol <span class="success">"Proses Pembayaran"</span><br>
                    • Tunggu loading 2 detik<br>
                    • Alert/popup akan muncul dengan hasil
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">7</div>
                <h3>✅ Verifikasi Hasil yang Muncul</h3>
                <div class="step-content">
                    <strong>Anda HARUS melihat pesan seperti ini:</strong>
                </div>
                
                <div class="expected-result">✅ Pembayaran Berhasil Diproses!

📄 Faktur: FGN-001-2024
💰 Total Faktur: Rp 1.500.000
💳 Jumlah Bayar: Rp 2.000.000
💳 Metode: Cash

✅ FGN-001-2024: LUNAS!
🔄 Overpayment: Rp 500.000
🔄 Sisa otomatis dialokasikan ke FGN-002-2024

🎉 Faktur FGN-001-2024 telah LUNAS!</div>
                
                <div class="tips-box">
                    <h4>✅ Checklist yang Harus Ada:</h4>
                    <ul>
                        <li>✓ Ada tulisan <strong>"Overpayment: Rp 500.000"</strong></li>
                        <li>✓ Ada tulisan <strong>"Sisa otomatis dialokasikan ke [nama faktur berikutnya]"</strong></li>
                        <li>✓ Faktur pertama status LUNAS</li>
                        <li>✓ Emoji 🔄 muncul (tanda overpayment)</li>
                    </ul>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">8</div>
                <h3>Cek Faktur Kedua Sudah Terbayar Sebagian</h3>
                <div class="step-content">
                    • Kembali ke list faktur toko tersebut<br>
                    • Cek faktur kedua (FGN-002-2024)<br>
                    • <span class="success">Sisa tagihan seharusnya berkurang Rp 500.000</span><br>
                    • Contoh: Jika semula Rp 2.000.000, sekarang jadi Rp 1.500.000
                </div>
            </div>
        </div>
        
        <!-- Test 2: Pembayaran Pas -->
        <div class="steps-container" id="test2">
            <h2 style="color: #667eea; margin-bottom: 30px; text-align: center;">
                ✅ TEST 2: PEMBAYARAN PAS (EXACT)
            </h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <h3>Pilih Faktur Lain</h3>
                <div class="step-content">
                    • Pilih toko berbeda atau faktur lain<br>
                    • Misal: Faktur Rp 1.500.000
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>Bayar dengan Jumlah SAMA PERSIS</h3>
                <div class="step-content">
                    • Total Faktur: <span class="highlight">Rp 1.500.000</span><br>
                    • Jumlah Bayar: <span class="highlight">Rp 1.500.000</span><br>
                    • Tidak ada overpayment, tidak ada kurang
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>✅ Expected Result</h3>
                <div class="expected-result">✅ Pembayaran Berhasil Diproses!

📄 Faktur: FGN-003-2024
💰 Total Faktur: Rp 1.500.000
💳 Jumlah Bayar: Rp 1.500.000
💳 Metode: Cash

🎉 Faktur FGN-003-2024 telah LUNAS!</div>
                
                <div class="tips-box">
                    <h4>✅ Yang Harus Terjadi:</h4>
                    <ul>
                        <li>✓ <strong>TIDAK ADA</strong> pesan overpayment</li>
                        <li>✓ <strong>TIDAK ADA</strong> pesan kembalian</li>
                        <li>✓ Langsung muncul "Faktur telah LUNAS!"</li>
                        <li>✓ Faktur hilang dari list (sudah lunas)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Test 3: Cicilan -->
        <div class="steps-container" id="test3">
            <h2 style="color: #667eea; margin-bottom: 30px; text-align: center;">
                📦 TEST 3: CICILAN (PEMBAYARAN SEBAGIAN)
            </h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <h3>Pilih Faktur untuk Test Cicilan</h3>
                <div class="step-content">
                    • Pilih faktur dengan total besar<br>
                    • Misal: Faktur Rp 2.000.000
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>Bayar dengan Jumlah KURANG dari Total</h3>
                <div class="step-content">
                    • Total Faktur: <span class="highlight">Rp 2.000.000</span><br>
                    • Jumlah Bayar: <span class="warning">Rp 1.000.000</span> (kurang!)<br>
                    • Sisa: Rp 1.000.000 (belum dibayar)
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>✅ Expected Result</h3>
                <div class="expected-result">✅ Pembayaran Berhasil Diproses!

📄 Faktur: FGN-004-2024
💰 Total Faktur: Rp 2.000.000
💳 Jumlah Bayar: Rp 1.000.000
💳 Metode: Cash

⚠️ Sisa Tagihan: Rp 1.000.000
📦 Status: CICILAN (Pembayaran Sebagian)</div>
                
                <div class="tips-box">
                    <h4>✅ Yang Harus Terjadi:</h4>
                    <ul>
                        <li>✓ Muncul pesan <strong>"Sisa Tagihan: Rp 1.000.000"</strong></li>
                        <li>✓ Status: <strong>"CICILAN"</strong> (bukan LUNAS)</li>
                        <li>✓ Faktur <strong>MASIH ADA</strong> di list (belum lunas)</li>
                        <li>✓ Sisa tagihan berkurang dari Rp 2.000.000 jadi Rp 1.000.000</li>
                    </ul>
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">4</div>
                <h3>Bayar Lagi untuk Lunasi</h3>
                <div class="step-content">
                    • Klik "Bayar" lagi pada faktur yang sama<br>
                    • Sekarang sisa tagihan: <span class="highlight">Rp 1.000.000</span><br>
                    • Bayar Rp 1.000.000 atau lebih<br>
                    • Faktur akan lunas total
                </div>
            </div>
        </div>
        
        <!-- Test 4: Overpayment Tanpa Next Invoice -->
        <div class="steps-container">
            <h2 style="color: #667eea; margin-bottom: 30px; text-align: center;">
                💵 TEST 4: OVERPAYMENT TANPA INVOICE BERIKUTNYA
            </h2>
            
            <div class="step">
                <div class="step-number">1</div>
                <h3>Pilih Toko dengan HANYA 1 Faktur</h3>
                <div class="step-content">
                    • Cari toko yang cuma punya 1 faktur (tidak ada faktur kedua)<br>
                    • Atau lunasi semua faktur kecuali satu
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">2</div>
                <h3>Bayar LEBIH dari Total</h3>
                <div class="step-content">
                    • Total Faktur: <span class="highlight">Rp 1.500.000</span><br>
                    • Jumlah Bayar: <span class="warning">Rp 2.000.000</span><br>
                    • Karena tidak ada faktur berikutnya, sisa jadi kembalian
                </div>
            </div>
            
            <div class="step">
                <div class="step-number">3</div>
                <h3>✅ Expected Result</h3>
                <div class="expected-result">✅ Pembayaran Berhasil Diproses!

📄 Faktur: FGN-005-2024
💰 Total Faktur: Rp 1.500.000
💳 Jumlah Bayar: Rp 2.000.000
💳 Metode: Cash

✅ FGN-005-2024: LUNAS!
🔄 Overpayment: Rp 500.000
⚠️ Tidak ada nota berikutnya untuk alokasi otomatis
💵 Sisa uang dikembalikan atau dicatat sebagai deposit</div>
                
                <div class="tips-box">
                    <h4>✅ Yang Harus Ada:</h4>
                    <ul>
                        <li>✓ Pesan <strong>"Overpayment: Rp 500.000"</strong></li>
                        <li>✓ Pesan <strong>"Tidak ada nota berikutnya"</strong></li>
                        <li>✓ Pesan <strong>"Sisa uang dikembalikan"</strong></li>
                        <li>✓ <strong>TIDAK</strong> ada alokasi ke faktur lain</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Troubleshooting -->
        <div class="steps-container">
            <h2 style="color: #667eea; margin-bottom: 30px; text-align: center;">
                🔧 TROUBLESHOOTING
            </h2>
            
            <div class="step">
                <h3>❌ Jika Pesan Error atau Tidak Sesuai</h3>
                <div class="step-content">
                    <strong>1. Refresh Browser</strong><br>
                    • Tekan <span class="highlight">Ctrl + F5</span> untuk hard refresh<br><br>
                    
                    <strong>2. Clear Browser Cache</strong><br>
                    • Tekan <span class="highlight">Ctrl + Shift + Delete</span><br>
                    • Pilih "Cached images and files"<br>
                    • Clear data<br><br>
                    
                    <strong>3. Cek Console untuk Error</strong><br>
                    • Tekan <span class="highlight">F12</span> untuk buka Developer Tools<br>
                    • Klik tab "Console"<br>
                    • Lihat apakah ada error merah<br><br>
                    
                    <strong>4. Pastikan File Sudah Saved</strong><br>
                    • Pastikan perubahan code sudah di-save<br>
                    • Tutup dan buka ulang file HTML
                </div>
            </div>
        </div>
        
        <!-- Summary -->
        <div class="steps-container" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <h2 style="text-align: center; margin-bottom: 30px;">
                🎯 RANGKUMAN FITUR YANG DITEST
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                    <div style="font-size: 3em; text-align: center;">🔄</div>
                    <h3 style="text-align: center; margin: 15px 0;">Overpayment</h3>
                    <p style="text-align: center;">Sisa uang otomatis ke invoice berikutnya</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                    <div style="font-size: 3em; text-align: center;">✅</div>
                    <h3 style="text-align: center; margin: 15px 0;">Pembayaran Pas</h3>
                    <p style="text-align: center;">Bayar exact, langsung lunas</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                    <div style="font-size: 3em; text-align: center;">📦</div>
                    <h3 style="text-align: center; margin: 15px 0;">Cicilan</h3>
                    <p style="text-align: center;">Bayar sebagian, sisa tercatat</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px;">
                    <div style="font-size: 3em; text-align: center;">💵</div>
                    <h3 style="text-align: center; margin: 15px 0;">Kembalian</h3>
                    <p style="text-align: center;">Overpay tanpa next invoice</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function openSalesMobile() {
            window.open('sales-mobile-final.html', '_blank');
            alert('✅ Sales Mobile Dashboard dibuka di tab baru!\n\nSilakan ikuti langkah-langkah testing di panduan ini.');
        }
        
        function scrollToTest(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>